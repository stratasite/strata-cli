# Datasource key should be unique in the Project
<%= @ds_key %>:
  # This is the display name of this datasource
  name: MYDATASOURCENAME
  # Optional description to provide more information in the UI
  description: This DS is the hot tier of our Product Domain

  # Required. Should be one of hot, warm, or cold. Helps the Query engine
  # prioritize a datasource when multiple can handle the request.
  tier: warm

  # A valid supported adapter
  adapter: snowflake
 
  # default client name sent to the db
  client_name: Strata

  # Max allowed time a query can run on this Datasource before manual time out
  query_timeout: 3600

  # Required: Your Snowflake account identifier (e.g., myorg-myaccount.us-east-1)
  account_identifier: myorg-myaccount

  # Required: Database name
  database: ANALYTICS_DB

  # Optional: Warehouse name
  warehouse: COMPUTE_WH

  # Optional: Schema name
  schema: PUBLIC

  # Optional: Role name
  role: ACCOUNTADMIN

  # Required: Authentication mode - one of: pat, kp, oauth
  # pat: personal_access_token
  # kp: key pair (requires username)
  # oauth: OAuth (requires setup on snowflake to enable)
  #   Additional required params
  #   oauth_client_id: <MYCLIENTID>
  #   oauth_cleint_secret: <MYCLIENTSECRET>
  #   oauth_redirect_uri: https://localhost:3420/callback
  #   oauth_scope: <SCOPE> # optional
  auth_mode: pat

  # For Personal Access Token (PAT) authentication:
  # You can set personal_access_token here. But to set securely please run:
  # `strata ds auth <%= @ds_key %>`
  # This command will save your credentials to the .strata global or local file.
  # personal_access_token:

  # For Key Pair (KP) authentication, uncomment and set:
  # username: john_doe
  # private_key: /path/to/private_key.pem

  # For OAuth authentication, additional setup required.
  # https://docs.snowflake.com/en/user-guide/oauth-custom
  #
  # Securely save tokens in .strata by running:
  #   `strata ds auth <%= @ds_key %>`
  #
  # This would only work if your snowflake setup allows modification
  # of the redirect url. Otherwise, you can get access_token and 
  # refresh_token by other means. Then add it to .strata like so:
  #
  # access_token: wrwerjwrljwer
  # refresh_token: erwerewrwer
  # expires_at: <%= Time.now %>
